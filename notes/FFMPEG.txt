FFMPEG LIVE STREAMING - НАСТРОЙКИ
=================================

ВХОДНЫЕ УСТРОЙСТВА
----------------------
-f v4l2
    Устанавливает формат захвата видео (Video4Linux2).
-framerate 15
    Частота кадров с камеры (15 FPS).
-video_size 640x480
    Размер захватываемого видео.
-i /dev/video0
    Устройство видеовхода (обычно веб-камера).

-f pulse -i default
    Захват звука с помощью PulseAudio (с устройства по умолчанию).

ОБРАБОТКА ВИДЕО
----------------------
-vf scale=w=1280:h=720:force_original_aspect_ratio=decrease
    Масштабирует видео до 1280x720, сохраняя пропорции (с полями, если нужно).

КОДЕКИ И СКОРОСТЬ
----------------------
-c:v libx264
    Кодек H.264 для видео.
-preset ultrafast
    Максимальная скорость кодирования, минимальная компрессия (низкое качество, но быстро).
-tune zerolatency
    Настройка кодека для низкой задержки — подходит для трансляций в реальном времени.

-c:a aac
    Кодек AAC для аудио.
-ar 44100
    Частота дискретизации звука: 44.1 kHz.
-b:a 128k
    Битрейт аудио: 128 килобит в секунду.

ВЫВОД В ФОРМАТЕ HLS
----------------------
-f hls
    Выводим в формате HLS (HTTP Live Streaming).

-hls_time 0.5
    Длина одного сегмента в секундах (0.5 секунды — почти минимальная задержка).

-hls_list_size 2
    Количество последних сегментов, хранимых в плейлисте (чем меньше — тем меньше задержка).

-hls_flags delete_segments+omit_endlist
    delete_segments — старые сегменты удаляются.
    omit_endlist — не добавлять конец плейлиста (для постоянного стрима).

<ПУТЬ>/stream.m3u8
    Финальный файл `.m3u8`, указывающий на актуальные `.ts` сегменты.
